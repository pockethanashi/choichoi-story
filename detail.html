<!DOCTYPE html>

<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å…¨æ–‡</title>
<link href="styles/detail.css" rel="stylesheet"/>
<link href="styles/common.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Kaisei+HarunoUmi&amp;display=swap" rel="stylesheet"/>
<link href="images/favicon.png" rel="icon" type="image/png"/>
</head>
<body>
<div data-story-id="sample001" style="display:none;"></div>
<!-- ğŸ”¸ å…±é€šãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆãƒ­ã‚´ï¼‹ã‚¿ã‚¤ãƒˆãƒ«ï¼‹ãƒŠãƒ“ï¼‰ -->
<header>
<div class="main-header">
<div class="header-main">
    ã€€<a href="index.html">
<img alt="ãƒ­ã‚´" class="logo" src="images/logo.png"/>
</a>
<div class="title-group">
<h1 class="site-title">ã¡ã‚‡ã„Choiceã‚¹ãƒˆãƒ¼ãƒªãƒ¼</h1>
<p class="site-subtitle">ã‚¢ãƒ—ãƒ‡ã™ã‚‹å°è©±</p>
</div>
</div>
</div>
<nav class="sub-header">
<a href="index.html">ãƒˆãƒƒãƒ—</a>
<a href="new-post.html">æ–°è¦æŠ•ç¨¿</a>
<a href="concept.html">ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a>
<a href="word-generator.html">ãƒã‚¿ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿</a>
<a href="contact.html">å•ã„åˆã‚ã›</a>
</nav>
</header>
<!-- ğŸ”¸ ã‚µã‚¤ãƒ‰ãƒãƒ¼ã¨ãƒ¡ã‚¤ãƒ³ã‚’ä¸¦ã¹ã‚‹ -->
<div class="container">
<aside id="story-sidebar">
<div id="version-area" style="margin-bottom: 1rem;">
<label for="version-select">åˆ¥ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¦‹ã‚‹:</label>
<select id="version-select"></select>
</div>
<p><strong>ã‚¸ãƒ£ãƒ³ãƒ«:</strong> <span id="story-genre"></span></p>
<p><strong>ã‚ªãƒªã‚¸ãƒŠãƒ«ä½œè€…:</strong> <span id="story-originalAuthor"></span></p>
<p><strong>ä½œè€…:</strong> <span id="story-author"></span></p>
<button class="profile-btn">ğŸ‘¤ ä½œè€…ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’è¦‹ã‚‹</button>
<p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</strong> <span id="story-version"></span></p>
<p><strong>æ›´æ–°æ—¥:</strong> <span id="story-updateDate"></span></p>
<p><strong>æ›´æ–°ãƒ¡ãƒ¢:</strong> <span id="story-updateMemo"></span></p>
</aside>
<main>
<h2 id="story-title">èª­ã¿è¾¼ã¿ä¸­...</h2>
<div id="story-body"></div>
<p>ã„ã„ã­æ•°: <span id="story-likes">0</span></p>
<button onclick="likeStory()">â¤ï¸ ã„ã„ã­</button>
<br/>
<a class="log-button" href="reading-log.html">ğŸ“– ã“ã®ä½œå“ã«æ„Ÿæƒ…ã‚’è¨˜éŒ²ã™ã‚‹</a>
<br/>
<button id="revise-button">âœï¸ ã“ã®ä½œå“ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹</button>
<p style="font-size: 0.9rem; color: #666;">â€»ä»–ã®äººã®ä½œå“ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€è‡ªåˆ†ãªã‚Šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŠ•ç¨¿ã§ãã¾ã™</p>
<br/>
<a href="index.html">â¬… ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</a>
<div id="logList" style="margin-top:2em; padding:1em; background:#e8f5e9; border-radius:6px;">
<h4>ğŸ“˜ ã“ã®ä½œå“ã®æ„Ÿæƒ…ãƒ­ã‚°<a href="reading-log.html" id="logPageLink" style="font-size:0.9em; margin-left:1em;">â†’ æ„Ÿæƒ…ãƒ­ã‚°ä¸€è¦§ãƒšãƒ¼ã‚¸ã¸</a></h4>
<div id="logItems"></div>
    ã€€ </div>
</main>
<!-- ğŸ”¹ ä½œè€…ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal" id="profile-modal">
<div class="modal-content">
<span class="close">Ã—</span>
<h2 id="profile-title"></h2>
<p id="profile-text"></p>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jsdiff/7.0.0/diff.min.js"></script>
<script src="scripts/detail.js"></script>
<script>
      document.getElementById("revise-button").addEventListener("click", function () {
        const params = new URLSearchParams(window.location.search);
        const storyId = params.get("id");

        // è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚¿ã‚¤ãƒˆãƒ«ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ï¼ˆæœ€æ–°ã®å†…å®¹ï¼‰
        const title = document.getElementById("story-title")?.textContent || "";
        const version = document.getElementById("story-version")?.textContent || "";

        if (storyId) {
          const postParams = new URLSearchParams({
            parent: storyId,
            title: title,
            version: version
          });
          window.location.href = `update-post.html?${postParams.toString()}`;
        } else {
          alert("å…ƒã®ä½œå“IDãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚");
        }
      });
</script>
</div><script>
// èª­ã¿è¾¼ã¿æ™‚ã«ãƒ­ã‚°ãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ³ã‚¯ã‚’ã‚¹ãƒˆãƒ¼ãƒªãƒ¼IDä»˜ãã«æ›´æ–°
window.addEventListener('DOMContentLoaded', () => {
  const storyId = document.querySelector('[data-story-id]')?.dataset.storyId;
  const logLink = document.getElementById('logPageLink');
  if (storyId && logLink) {
    logLink.href = `reading-log.html?id=${encodeURIComponent(storyId)}`;
  }
});
</script></body>
</html>
